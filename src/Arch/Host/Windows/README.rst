LXSS metadata
=============

WSL2 linux environments mount local drives in `/mnt/c`, etc. and support extended file attributes
using the `getfattr` and `setfattr` commands. For example::

    mike@ATHLONME:/mnt/i/temp$ setfattr -n user.donkey -v hello abc.txt
    mike@ATHLONME:/mnt/i/temp$ getfattr -d *
    # file: abc.txt
    user.donkey="hello"


At time of writing WSL does not appear to provide a specific mechanism for reading or writing
this metadata from Windws.
However, investigation shows that the data is written as NTFS Extended Attributes.
Attribute names are prefixed with "lx.", and the value is prefixed with "lxea".

This information can be accessed from Windows using native API calls `NtSetEaFile` and `NtQueryEaFile`.

Here is a sector-level view of the file::

    Offset       0  1  2  3  4  5  6  7   8  9  A  B  C  D  E  F
    0C0025400   46 49 4C 45 30 00 03 00  B3 C4 46 3C 01 00 00 00   FILE0...³ÄF<....
    0C0025410   1F 00 01 00 38 00 01 00  C8 01 00 00 00 04 00 00   ....8...È.......
    0C0025420   00 00 00 00 00 00 00 00  06 00 00 00 95 00 00 00   ............•...
    0C0025430   09 00 00 00 00 00 00 00  10 00 00 00 60 00 00 00   ............`...
    0C0025440   00 00 00 00 00 00 00 00  48 00 00 00 18 00 00 00   ........H.......
    0C0025450   B2 84 B4 5D DC 02 D7 01  85 99 6D DA F3 02 D7 01   ²„´]Ü.×.…™mÚó.×.
    0C0025460   EB C8 14 02 08 03 D7 01  85 99 6D DA F3 02 D7 01   ëÈ....×.…™mÚó.×.
    0C0025470   20 00 04 00 00 00 00 00  00 00 00 00 00 00 00 00    ...............
    0C0025480   00 00 00 00 09 01 00 00  00 00 00 00 00 00 00 00   ................
    0C0025490   B8 8E 96 2D 00 00 00 00  30 00 00 00 68 00 00 00   ¸Ž–-....0...h...
    0C00254A0   00 00 00 00 00 00 02 00  50 00 00 00 18 00 01 00   ........P.......
    0C00254B0   36 00 00 00 00 00 1F 00  B2 84 B4 5D DC 02 D7 01   6.......²„´]Ü.×.
    0C00254C0   B2 84 B4 5D DC 02 D7 01  B2 84 B4 5D DC 02 D7 01   ²„´]Ü.×.²„´]Ü.×.
    0C00254D0   B2 84 B4 5D DC 02 D7 01  00 00 00 00 00 00 00 00   ²„´]Ü.×.........
    0C00254E0   00 00 00 00 00 00 00 00  20 00 00 00 00 00 00 00   ........ .......
    0C00254F0   07 00 61 00 62 00 63 00  2E 00 74 00 78 00 74 00   ..a.b.c...t.x.t.
    0C0025500   80 00 00 00 30 00 00 00  00 00 18 00 00 00 01 00   €...0...........
    0C0025510   14 00 00 00 18 00 00 00  4E 6F 74 68 69 6E 67 20   ........Nothing 
    0C0025520   74 6F 20 73 65 65 20 68  65 72 65 2E 00 00 00 00   to see here.....
    0C0025530   80 00 00 00 38 00 00 00  00 09 18 00 00 00 05 00   €...8...........
    0C0025540   04 00 00 00 30 00 00 00  73 00 6F 00 6D 00 65 00   ....0...s.o.m.e.
    0C0025550   74 00 68 00 69 00 6E 00  67 00 00 00 00 00 00 00   t.h.i.n.g.......
    0C0025560   65 6C 73 65 20 00 00 00  D0 00 00 00 20 00 00 00   else ...Ð... ...
    0C0025570   00 00 00 00 00 00 03 00  08 00 00 00 18 00 00 00   ................
    0C0025580   1C 00 00 00 20 00 00 00  E0 00 00 00 38 00 00 00   .... ...à...8...
    0C0025590   00 00 00 00 00 00 04 00  20 00 00 00 18 00 00 00   ........ .......
    0C00255A0   20 00 00 00 00 0E 09 00  4C 58 2E 55 53 45 52 2E    .......LX.USER.
    0C00255B0   44 4F 4E 4B 45 59 00 6C  78 65 61 68 65 6C 6C 6F   DONKEY.lxeahello
    0C00255C0   FF FF FF FF 82 79 47 11  00 00 00 00 00 00 00 00   ÿÿÿÿ‚yG.........
    0C00255D0   00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00   ................
    0C00255E0   00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00   ................
    0C00255F0   00 00 00 00 00 00 00 00  00 00 00 00 00 00 09 00   ................


Note:
There is additional information available via `NtQueryInformationFile`.

See:
 
https://docs.microsoft.com/en-us/windows-hardware/drivers/ddi/ntifs/ns-ntifs-_file_stat_lx_information

A `FileStatLxInformation` query looks like this:

    40970 NtQueryInformationFile(70): 0x00000000, 0x00000000, 96
    INFO: 95 00 00 00 00 00 1f 00 b2 84 b4 5d dc 02 d7 01  ...........]....
          85 99 6d da f3 02 d7 01 85 99 6d da f3 02 d7 01  ..m.......m.....
          eb c8 14 02 08 03 d7 01 18 00 00 00 00 00 00 00  ................
          14 00 00 00 00 00 00 00 20 00 00 00 00 00 00 00  ........ .......
          01 00 00 00 bf 01 17 00 00 00 00 00 00 00 00 00  ................
          00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................

The supplementary Linux fields are empty. Perhaps this relates to WSL1?
